@model IEnumerable<Blog.Models.BlogPost>

@{
    ViewBag.Title = "Home Page";
}
@*<!DOCTYPE html>
    <html lang="en">*@
@*<head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Full Slider - Start Bootstrap Template</title>

        <!-- Bootstrap Core CSS -->
        <link href="~/Content/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="~/Content/full-slider.css" rel="stylesheet">

        <link href="~/Content/flickity.css" rel="stylesheet" media="screen">
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>*@
@*<body>*@
<!-- Navigation -->
@*<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Start Bootstrap</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">Services</a>
                    </li>
                    <li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>*@
<!-- Full Page Image Background Carousel Header -->
<!--<header id="myCarousel" class="carousel slide">
     Indicators
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
        <li data-target="#myCarousel" data-slide-to="3"></li>
    </ol>-->
<!-- Wrapper for Slides -->
<div class="carousel container-fluid" data-flickity='{ "freeScroll": true, "contain": true, "pageDots": false, "autoPlay": true }'>
    <div class="carousel-cell fill">
        <!-- Set the first background image using inline CSS below. -->
        <div class="jumbotron">
            <h1 style="font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif">Kyle's Coder Blog</h1>
            <p class="lead">Enjoy candid documentation of my journey to becoming a software developer.</p>
        </div>
    </div>
    @{
    int num = 0;
    foreach (var item in Model.Reverse())
            {
        <div class="carousel-cell fill">
            <!-- Set the second background image using inline CSS below. -->
            <div class="row text-center">
                <h1>@Html.ActionLink(item.Title, "Details", "BlogPosts", new { Slug = item.Slug }, new { @class = "links", style = "font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif" })</h1>
            </div>
            <div class="row text-left">
                <div class="col-lg-8 col-lg-offset-2">
                    <p align="right" id="created_date_@num"></p>
                </div>
            </div>
            @if (item.Topics != null)
                {
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <p align="right" style="font-size:1em;">Topics</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-2 pull-right">
                    </div>
                    <div class="col-lg-4 pull-right">
                        <p style="font-size:.75em;" align="right">
                            @foreach (var topic in item.Topics)
                    {
                        if (topic != item.Topics.Last())
                        {
                                    @Html.ActionLink(topic.Name, "Details", "Topics", new { id = topic.Id }, new { @class = "links" })<span>, </span>
                                }
                                else
                                {
                                    @Html.ActionLink(topic.Name, "Details", "Topics", new { id = topic.Id }, new { @class = "links" })
                                }
                            }
                        </p>
                    </div>
                </div>
            }
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <hr />
                </div>
            </div>
            <div class="row text-left">
                @if (item.MediaURL != null)
                {
                    <div class="col-lg-8 col-lg-offset-2">
                        <img class="img-responsive img-rounded pull-left" style="width:50%; margin-right:1em; margin-bottom:0.5em;" src="@item.MediaURL" />
                        @if (item.Body.Length > 500)
                        {
                            string truncBody = item.Body.Substring(0, 500) + "...</p>";

                            @Html.Raw(truncBody)
                        }
                        else
                        {
                            @Html.Raw(item.Body)
                        }
                    </div>

                }
                else
                {
                    if (item.Body.Length > 750)
                    {
                        string truncBody = item.Body.Substring(0, 750) + "...</p>";

                        <div class="col-lg-8 col-lg-offset-2">
                            @Html.Raw(truncBody)
                        </div>
                    }
                    else
                    {
                        <div class="col-lg-8 col-lg-offset-2">
                            @Html.Raw(item.Body)
                        </div>
                    }
                }
            </div>

            <!--<div class="carousel-caption">
                <h2>Caption 2</h2>
            </div>-->
        </div>
            num++;
        }
        }
</div>
<!-- Controls -->
<!--<a class="left carousel-control" href="#myCarousel" data-slide="prev">
    <span class="icon-prev"></span>
</a>
<a class="right carousel-control" href="#myCarousel" data-slide="next">
    <span class="icon-next"></span>
</a>-->
<!--</header>-->
<!-- Page Content -->
@*<div class="container">

    <div class="row">
        <div class="col-lg-12">
            <h1>Full Slider by Start Bootstrap</h1>
            <p>The background images for the slider are set directly in the HTML using inline CSS. The rest of the styles for this template are contained within the <code>full-slider.css</code>file.</p>
        </div>
    </div>

    <hr>

     Footer
    @*<footer>
        <div class="row">
            <div class="col-lg-12">
                <p>Copyright &copy; Your Website 2014</p>
            </div>
        </div>
         /.row
    </footer>*@
@*</div>*@
<!-- /.container -->
@*<!-- jQuery -->
    <script src="~/Scripts/jquery-3.1.1.min.js"></script>

    <!-- Flickity -->
    <script src="~/Scripts/flickity.pkgd.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="~/Scripts/bootstrap.min.js"></script>*@
<!-- Script to Activate the Carousel -->
@*<script>
    //$('.carousel').carousel({
    //    interval: 5000 //changes the speed
    //})
    </script>*@
@*</body>

    </html>*@
@section scripts{
    <script type="text/javascript">
        function fixDate(count, created) {
            var time1 = getUserTime(created);
            $("#created_date_" + count).html("Created: " + time1);
            
        }

            @{
                int count = 0;
                foreach (var blog in Model.Reverse())
                {
                    @:fixDate(@count,'@blog.Created.ToUniversalTime().ToString()');
                    count++;
                }
            }

    </script>
    }